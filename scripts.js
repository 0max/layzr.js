"use strict";function HeadingLinks(t){this._selector=t.selector||"h1, h2, h3",this._hoverLinks=t.hoverLinks!==!1,this._hoverHeadingAttr=t.hoverHeadingAttr||"data-heading",this._hoverLinkAttr=t.hoverLinkAttr||"data-heading-link",this._headings=document.querySelectorAll(this._selector),this._headingsLength=this._headings.length,document.addEventListener("DOMContentLoaded",this.create(),!1)}function Layzr(t){this._lastScroll=0,this._ticking=!1,this._optionsAttr=t.attr||"data-layzr",this._optionsAttrRetina=t.retinaAttr||"data-layzr-retina",this._optionsCallback=t.callback||null,this._retina=window.devicePixelRatio>1?!0:!1,this._imgAttr=this._retina?this._optionsAttrRetina:this._optionsAttr,this._images=document.getElementsByTagName("img"),document.addEventListener("DOMContentLoaded",this._create(),!1)}HeadingLinks.prototype.create=function(){for(var t=0;t<this._headingsLength;t++){var e=this._headings[t],i=e.textContent;i=i.toLowerCase().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").replace(/\_+/g,""),e.setAttribute("id",i)}this._hoverLinks&&this.addHoverLinks()},HeadingLinks.prototype.destroy=function(){for(var t=0;t<this._headingsLength;t++)this._headings[t].removeAttribute("id")},HeadingLinks.prototype.addHoverLinks=function(){for(var t=0;t<this._headingsLength;t++){var e=this._headings[t];e.setAttribute(this._hoverHeadingAttr,"");var i=e.id,r=document.createElement("a"),s="#"+i;r.setAttribute("href",s),r.setAttribute(this._hoverLinkAttr,""),e.insertBefore(r,e.firstChild)}},HeadingLinks.prototype.removeHoverLinks=function(){for(var t=0;t<this._headingsLength;t++){var e=this._headings[t];e.removeAttribute(this._hoverHeadingAttr);for(var i=e.children,r=i.length,s=0;r>s;s++)if(i[s].hasAttribute(this._hoverLinkAttr)){i[s].parentNode.removeChild(i[s]);break}}},HeadingLinks.prototype.getList=function(){return this._headings},Layzr.prototype._requestScroll=function(){this._lastScroll=window.scrollY||window.pageYOffset,this._requestTick()},Layzr.prototype._requestTick=function(){this._ticking||(requestAnimationFrame(this.update.bind(this)),this._ticking=!1)},Layzr.prototype._create=function(){this._requestScroll(),window.addEventListener("scroll",this._requestScroll.bind(this),!1),window.addEventListener("resize",this._requestScroll.bind(this),!1)},Layzr.prototype._destroy=function(){window.removeEventListener("scroll",this._requestScroll.bind(this),!1),window.removeEventListener("resize",this._requestScroll.bind(this),!1)},Layzr.prototype._getOffset=function(t){var e=0;do isNaN(t.offsetTop)||(e+=t.offsetTop);while(t=t.offsetParent);return e},Layzr.prototype._inViewport=function(t){var e=this._lastScroll,i=e+window.innerHeight,r=this._getOffset(t),s=r+t.offsetHeight;return s>=e&&i>=s},Layzr.prototype.update=function(){for(var t=this._images.length,e=0;t>e;e++){var i=this._images[e];(i.hasAttribute(this._imgAttr)||i.hasAttribute(this._optionsAttr))&&this._inViewport(i)&&this.reveal(i)}this._ticking=!1},Layzr.prototype.reveal=function(t){var e=t.getAttribute(this._imgAttr)||t.getAttribute(this._optionsAttr);t.removeAttribute(this._optionsAttr),t.removeAttribute(this._optionsAttrRetina),e&&(t.setAttribute("src",e),"function"==typeof this._optionsCallback&&this._optionsCallback.call(t))};